---
layout: post
title: 我校&*校园网下的文件传输
date: 2021-04-16
author: Matt-wzy
tags: [essay]
comments: true
toc: true
#theme: github-dark-orange
---

　　校园网作为一个大的局域网限制真**多，&！

<!-- more -->

<div>
    <meting-js
	name="Don't Look Back"
	artist="RICK AND MORTY"
	url="../music/1.mp3"
	cover="https://y.qq.com/music/photo_new/T002R300x300M000000ZZmIF4I02cC_1.jpg"
	fixed="true">
	<!-- <pre hidden>
		[00:00.00]This
		[00:04.01]is
		[00:08.02]lyric
	</pre> -->
    </meting-js>
</div>

# 起因

　　同学要用某个软件安装包，我恰好有，他人距离我有点远，考虑到我们两个 ~~都人傻钱多~~ 都买了校园网，恰好两边都有网线，而又恰好同学那边又比较着急，就想着远程传一个大文件试试。

　　这是个公开的博客， ~~我才不会跟你讲我这边有个路由器~~ , 若文档中有不合适的描述，欢迎 issue 告知。

　　真不巧，前些年在家里赖在床上手机远程电脑的时候积累了不少远程链接的骚操作和经验，正好用上了。

# 试图解决

## 电脑上直接操作

### SMB share

　　众所周知，win系统自带的smb文件共享功能在win7时代是很好用的，而且那个时候大家的电脑里面自带的系统是都支持直接开通smb功能不需要另外向微软缴费的，不过嘛，我校学生享受正版win专业版授权，所以win10虽然限制家庭版用户使用smb功能但是我们还是可以很方便地使用smb这种win原生的功能，实际上如果网络不错的话体验应该还是蛮不错的。

　　但是因为某些 ~~屑原因~~ 不可抗力，我校校园网屏蔽了smb服务所使用的端口，你就算电脑直接接入校园网，开开防火墙，怎么折腾，都不管用（除非你打算换端口，但是我绝不会那么干）

　　所以，SMB文件名共享方案，搁置。

### FTP

　　实际上，在win环境下搭建ftp服务也不是不可以，而且随着时代的进步必然搭建难度会越来越傻瓜化，但是由于我实在是怕把电脑环境搞乱而且~~手头又有个路由器想这次用上~~ ， 这次就没有尝试用搭建ftp的方法，其实用ftp的话应该会更方便一些，毕竟ftp可以随便换端口。~~如果你想你甚至可以在25565端口配置一个ftp服务器 ~~

　　这里就先不给很详细的描述了， [简单放一个网站](https://www.xp.cn/wenda/400.html "简单放一个网站") ，想了解的小伙伴可以自己点进去看看。

## 路由器上整新活

### 局域网smb挂载+外部KOD访问

　　这可以说是我目前而言能想到的最曲折的方式了，应该没有之一了，毕竟正常人谁会妥协到这种程度了还不用U盘直接解决战斗？其次，内部挂载再转外部访问不一定要引入KOD，你其实直接sftp就行，不过考虑到对面死活不给我私钥（别问，问就是用密码访问不安全）我就只能勉为其难地给他开了个KOD做妥协……

首先，你需要在openwrt系统的路由器上面安排上局域网内部的SMB挂载，(如图)

![图：SMB挂载示例](https://vkceyugu.cdn.bspapp.com/VKCEYUGU-3c98b21f-9e7e-4bcb-9142-940554115122/6a087eb0-d175-4b3d-9ac8-9f8cfef89ce3.png)

然后，你需要找一个目录给KOD做网站的根目录，有外部储存最好，没有外部储存的话你内部储存搞一个新的分区也行。

![](https://vkceyugu.cdn.bspapp.com/VKCEYUGU-3c98b21f-9e7e-4bcb-9142-940554115122/6fa30b87-1c87-40cc-890a-86351e52ed12.png)
上图这两个改成你路由器里面可读写的目录，可访问目录填写之前SMB挂载填上的共享文件夹。

~~然后你就可以愉快地打开KOD访问你的文件啦~~~

实际上到现在你大有可能还是找不到去哪里找你的文件……

打开KOD网页，配置好之后找到设置-储存/文件-储存管理，点新增

![PnURpp.png](https://piccdn.freejishu.com/images/2021/04/16/PnURpp.png)
名称、空间大小瞎填即可，储存目录选之前smb挂载的目录
![PnUtar.png](https://piccdn.freejishu.com/images/2021/04/16/PnUtar.png)
点击储存目录右面那个小按钮之后会弹出一个窗口，那个窗口就是你KOD网站运行所在的目录了，`/`代表路由器里面的根目录，要找到你挂载的那个文件夹其实就轻而易举了。
![PnUz7a.png](https://piccdn.freejishu.com/images/2021/04/16/PnUz7a.png)

如果不出意外的话，你现在就能在文件里面找到你刚刚挂载好的文件了
![](https://vkceyugu.cdn.bspapp.com/VKCEYUGU-3c98b21f-9e7e-4bcb-9142-940554115122/0c336c68-5af5-4501-b1ca-70faf4250e82.png)
